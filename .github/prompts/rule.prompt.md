# スグクルプロジェクトコーディングルール

このドキュメントは、LLMを使用したコード生成時に一貫性のあるコードを生成するためのガイドラインです。

## 基本的なコーディング規約

### コードスタイル
- インデントは2スペースを使用
- 行の最大長は100文字
- 文末のセミコロンは必須
- 波括弧は同じ行に配置（K&R スタイル）

### 命名規則
- 変数・関数：キャメルケース（例：`getUserData`）
- クラス・コンポーネント：パスカルケース（例：`UserController`, `ProfileCard`）
- 定数：大文字スネークケース（例：`MAX_RETRY_COUNT`）
- プライベートメンバー：アンダースコアプレフィックス（例：`_privateVar`）
- ファイル名：
  - コンポーネント: パスカルケース（例：`UserCard.tsx`）
  - ユーティリティ・フック: キャメルケース（例：`useAuth.ts`, `mapUtils.ts`）
  - README/設定ファイル: 大文字（例：`README.md`）

### ファイル構成
- 構造体ごとに1ファイルで実装する。ファイル名はその構造体に関する命名にする。
- 函数はそれと関連するファイル内に実装する。
- TSXファイルではコンポーネントのみを定義し、src/componentディレクトリ配下に配置する。
- ユーティリティ関数などはsrc/libディレクトリ配下にTSファイルとして定義する。

## アーキテクチャと設計方針

### 設計パターン
- Reactコンポーネントベースのアーキテクチャ
- コンテキストベースの状態管理
- カスタムフックによるロジックの分離
- サービス層によるAPI通信の抽象化

### モジュール化
- 単一責任の原則を遵守
- 関心事の分離を徹底
- コンポーネントは小さく保ち、複雑なロジックはカスタムフックに分離

## 技術スタックとバージョン

### 使用言語
- TypeScript 4.9.x
- Node.js 18.x

### フレームワークとプラットフォーム
- React 18.x
- Vite（ビルドツール）
- Supabase（バックエンド基盤）

### 主要ライブラリ
- Tailwind CSS: UIスタイリング
- axios: HTTP通信
- React Router: クライアントサイドルーティング
- Zod: データバリデーション
- Lucide React: アイコンライブラリ
- Vitest: テストフレームワーク

### 外部API統合
- Google Maps API: 地図表示、経路計算
- PayPay API: 決済処理
- LINE Notify API: 通知送信
- Supabase: 認証、データベース、ストレージ

## コード品質基準

### テスト要件
- 単体テストはコンポーネントとユーティリティ関数に対して実装
- テストファイルは対象ファイルと同じディレクトリに配置
- テストファイル名は `*.test.ts` または `*.spec.ts`

### エラー処理
詳細は `./prompts/error_handling.prompt.md` を参照してください。

### ログ出力
詳細は `./prompts/log.prompt.md` を参照してください。

## ドキュメント要件

### コメント
- 関数の上にJSDocコメントを記述
- 複雑なロジックには説明コメントを追加
- TODO/FIXMEコメントには担当者と期限を記載
- すべてのコメントは `./prompts/comment.prompt.md` に従う。

## 環境固有の考慮事項

### 互換性
- モダンブラウザ（Chrome, Firefox, Safari, Edge最新版）をサポート
- モバイルファーストのレスポンシブデザイン
- アクセシビリティガイドライン（WCAG 2.1 AA）準拠

### パフォーマンス
- First Contentful Paint は1.5秒以内
- ルーティング変更時のレンダリングは300ms以内
- API通信にはSWRパターンを適用し、キャッシュを活用

---

このルールは随時更新されます。コード生成時には最新版を参照してください。
